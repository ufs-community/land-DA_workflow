<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>3.2. Input/Output Files for the Noah-MP Model &mdash; UFS Offline Land DA User&#39;s Guide develop documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=044582d4" />
      <link rel="stylesheet" type="text/css" href="../_static/theme_overrides.css?v=3db8afb0" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=16816911"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="3.3. Input/Output Files for the JEDI DA System" href="DASystem.html" />
    <link rel="prev" title="3.1. Available Workflow Configuration Parameters" href="ConfigWorkflow.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            UFS Offline Land DA User's Guide
              <img src="https://github.com/ufs-community/ufs/wiki/images/ufs-epic-logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                develop
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../BackgroundInfo/index.html">1. Background Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../BuildingRunningTesting/index.html">2. Building, Running, and Testing the Land DA System</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">3. Customizing the Workflow</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="ConfigWorkflow.html">3.1. Available Workflow Configuration Parameters</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">3.2. Input/Output Files for the Noah-MP Model</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#input-files">3.2.1. Input Files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#viewing-netcdf-files">3.2.1.1. Viewing netCDF Files</a></li>
<li class="toctree-l4"><a class="reference internal" href="#input-files-for-the-datm-lnd-configuration-with-gswp3-data">3.2.1.2. Input Files for the <code class="docutils literal notranslate"><span class="pre">DATM</span></code> + <code class="docutils literal notranslate"><span class="pre">LND</span></code> Configuration with GSWP3 data</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#forcing-files">3.2.1.2.1. Forcing Files</a></li>
<li class="toctree-l5"><a class="reference internal" href="#noah-mp-initial-conditions">3.2.1.2.2. Noah-MP Initial Conditions</a></li>
<li class="toctree-l5"><a class="reference internal" href="#fv3-fix-tiled-files">3.2.1.2.3. FV3_fix_tiled Files</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="DASystem.html">3.3. Input/Output Files for the JEDI DA System</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Reference/index.html">4. Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">UFS Offline Land DA User's Guide</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html"><span class="section-number">3. </span>Customizing the Workflow</a></li>
      <li class="breadcrumb-item active"><span class="section-number">3.2. </span>Input/Output Files for the Noah-MP Model</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/CustomizingTheWorkflow/Model.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="input-output-files-for-the-noah-mp-model">
<span id="model"></span><h1><span class="section-number">3.2. </span>Input/Output Files for the Noah-MP Model<a class="headerlink" href="#input-output-files-for-the-noah-mp-model" title="Link to this heading"></a></h1>
<p>This chapter provides practical information on input files and parameters for the Noah-MP Land Surface Model (LSM) and its Vector-to-Tile Converter component.
For background information on the Noah-MP LSM, see <a class="reference internal" href="../BackgroundInfo/Introduction.html#noahmp"><span class="std std-numref">Section 1.1.3.2</span></a> of the Introduction.</p>
<section id="input-files">
<span id="inputfiles"></span><h2><span class="section-number">3.2.1. </span>Input Files<a class="headerlink" href="#input-files" title="Link to this heading"></a></h2>
<p>The UFS land model requires multiple input files to run, including static datasets (fix files containing climatological information, terrain, and land use data), initial conditions files, and forcing files.
Users may reference the <a class="reference external" href="https://opensky.ucar.edu/islandora/object/technotes:599">Community Noah-MP Land Surface Modeling System Technical Description Version 5.0</a> (2023) and the <a class="reference external" href="https://www.jsg.utexas.edu/noah-mp/files/Users_Guide_v0.pdf">Community Noah-MP User’s Guide</a> (2011) for a detailed technical description of certain elements of the Noah-MP model.</p>
<p>In both the land component and land driver implementations of Noah-MP, static file(s) and initial conditions file(s) specify model parameters.
These files are publicly available in the <a class="reference external" href="https://registry.opendata.aws/noaa-ufs-land-da/">Land DA data bucket</a>.
Users can download the data and untar the file via the command line:</p>
<div class="highlight-console notranslate" id="tarfile"><div class="highlight"><pre><span></span><span class="go">wget https://noaa-ufs-land-da-pds.s3.amazonaws.com/develop-20240501/Landda_develop_data.tar.gz</span>
<span class="go">tar xvfz Landda_develop_data.tar.gz</span>
</pre></div>
</div>
<p>For data specific to the latest release (v1.2.0), users can run:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">wget https://noaa-ufs-land-da-pds.s3.amazonaws.com/current_land_da_release_data/v1.2.0/Landdav1.2.0_input_data.tar.gz</span>
<span class="go">tar xvfz Landdav1.2.0_input_data.tar.gz</span>
</pre></div>
</div>
<p>These files and their parameters are described in the following subsections.</p>
<section id="viewing-netcdf-files">
<span id="view-netcdf-files"></span><h3><span class="section-number">3.2.1.1. </span>Viewing netCDF Files<a class="headerlink" href="#viewing-netcdf-files" title="Link to this heading"></a></h3>
<p>Users can view file information, variables, and notes for NetCDF files using the <code class="docutils literal notranslate"><span class="pre">ncdump</span></code> module. On Level 1 platforms, users can load the Land DA environment from <code class="docutils literal notranslate"><span class="pre">land-DA_workflow</span></code> as described in <a class="reference internal" href="../BuildingRunningTesting/BuildRunLandDA.html#config-wflow"><span class="std std-numref">Section 2.1.4</span></a>.</p>
<p>Then, users can run <code class="docutils literal notranslate"><span class="pre">ncdump</span> <span class="pre">-h</span> <span class="pre">path/to/filename.nc</span></code>, where <code class="docutils literal notranslate"><span class="pre">path/to/filename.nc</span></code> is replaced with the path to the file. For example, on Orion, users might run:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">module load netcdf-c/4.9.2</span>
<span class="go">ncdump -h /work/noaa/epic/UFS_Land-DA_Dev/inputs/NOAHMP_IC/ufs-land_C96_init_fields.tile1.nc</span>
</pre></div>
</div>
<p>On other systems, users can load a compiler, MPI, and NetCDF modules before running the <code class="docutils literal notranslate"><span class="pre">ncdump</span></code> command above. For example:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">module load intel/2022.1.2 impi/2022.1.2 netcdf-c/4.9.2</span>
<span class="go">ncdump -h /path/to/inputs/NOAHMP_IC/ufs-land_C96_init_fields.tile1.nc</span>
</pre></div>
</div>
<p>Users may need to modify the <code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">load</span></code> command to reflect modules that are available on their system.</p>
</section>
<section id="input-files-for-the-datm-lnd-configuration-with-gswp3-data">
<span id="datm-lnd-input-files"></span><h3><span class="section-number">3.2.1.2. </span>Input Files for the <code class="docutils literal notranslate"><span class="pre">DATM</span></code> + <code class="docutils literal notranslate"><span class="pre">LND</span></code> Configuration with GSWP3 data<a class="headerlink" href="#input-files-for-the-datm-lnd-configuration-with-gswp3-data" title="Link to this heading"></a></h3>
<p>With the integration of the UFS Noah-MP land component into the Land DA System in the v1.2.0 release, model forcing options have been enhanced so that users can run the UFS land component (<a class="reference internal" href="../Reference/Glossary.html#term-LND"><span class="xref std std-term">LND</span></a>) with the data atmosphere component (<a class="reference internal" href="../Reference/Glossary.html#term-DATM"><span class="xref std std-term">DATM</span></a>). Updates provide a new analysis option on the cubed-sphere native grid using <a class="reference internal" href="../Reference/Glossary.html#term-GSWP3"><span class="xref std std-term">GSWP3</span></a> forcing data to run a cycled experiment for 2000-01-03 to 2000-01-04. An artificial GHCN snow depth observation is provided for data assimilation (see <a class="reference internal" href="DASystem.html#observation-data"><span class="std std-numref">Section 3.3.2.2</span></a> for more on GHCN files). The GHCN observations will be extended in the near future.</p>
<p>On Level 1 platforms, the requisite data are pre-staged at the locations listed in <a class="reference internal" href="../BuildingRunningTesting/BuildRunLandDA.html#level1data"><span class="std std-numref">Section 2.1</span></a>. The data are also publicly available via the <a class="reference external" href="https://registry.opendata.aws/noaa-ufs-land-da/">Land DA Data Bucket</a>.</p>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>The DATM + LND option is only supported on Level 1 systems (i.e., Hera and Orion). It is not tested or supported using a container except on Hera and Orion.</p>
</div>
<section id="forcing-files">
<h4><span class="section-number">3.2.1.2.1. </span>Forcing Files<a class="headerlink" href="#forcing-files" title="Link to this heading"></a></h4>
<p><a class="reference internal" href="../Reference/Glossary.html#term-forcing-data"><span class="xref std std-term">Forcing files</span></a> for the land component configuration come from the Global Soil Wetness Project Phase 3 dataset. They are located in the <code class="docutils literal notranslate"><span class="pre">inputs/DATM_input_data/gswp3</span></code> directory (downloaded <a class="reference internal" href="#inputfiles"><span class="std std-ref">above</span></a>).</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">clmforc.GSWP3.c2011.0.5x0.5.Prec.1999-12.nc</span>
<span class="go">clmforc.GSWP3.c2011.0.5x0.5.Prec.2000-01.nc</span>
<span class="go">clmforc.GSWP3.c2011.0.5x0.5.Solr.1999-12.nc</span>
<span class="go">clmforc.GSWP3.c2011.0.5x0.5.Solr.2000-01.nc</span>
<span class="go">clmforc.GSWP3.c2011.0.5x0.5.TPQWL.1999-12.nc</span>
<span class="go">clmforc.GSWP3.c2011.0.5x0.5.TPQWL.2000-01.nc</span>
<span class="go">clmforc.GSWP3.c2011.0.5x0.5.TPQWL.SCRIP.210520_ESMFmesh.nc</span>
<span class="go">fv1.9x2.5_141008_ESMFmesh.nc</span>
<span class="go">topodata_0.9x1.25_USGS_070110_stream_c151201.nc</span>
<span class="go">topodata_0.9x1.SCRIP.210520_ESMFmesh.nc</span>
</pre></div>
</div>
<p>These files provide atmospheric forcing data related to precipitation, solar radiation, longwave radiation, temperature, pressure, winds, humidity, topography, and mesh data.</p>
</section>
<section id="noah-mp-initial-conditions">
<h4><span class="section-number">3.2.1.2.2. </span>Noah-MP Initial Conditions<a class="headerlink" href="#noah-mp-initial-conditions" title="Link to this heading"></a></h4>
<p>The offline Land DA System currently only supports snow DA.
The initial conditions files include the initial state variables that are required for the UFS land snow DA to begin a cycling run. The data must be provided in <a class="reference internal" href="../Reference/Glossary.html#term-netCDF"><span class="xref std std-term">netCDF</span></a> format.</p>
<p>By default, on Level 1 systems and in the Land DA data bucket, the initial conditions files are located at <code class="docutils literal notranslate"><span class="pre">inputs/NOAHMP_IC/ufs-land_C96_init_fields.tile*.nc</span></code> (downloaded <a class="reference internal" href="#inputfiles"><span class="std std-ref">above</span></a>). Each file corresponds to one of the six tiles of the <a class="reference external" href="https://www.gfdl.noaa.gov/fv3/fv3-grids/">global FV3 grid</a>.</p>
<p>The files contain the following data:</p>
<table class="docutils align-default" id="id2">
<caption><span class="caption-number">Table 3.1 </span><span class="caption-text"><em>Variables specified in the initial conditions file ufs-land_C96_init_fields.tile</em>.nc*</span><a class="headerlink" href="#id2" title="Link to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Variables</p></th>
<th class="head"><p>Long Name</p></th>
<th class="head"><p>Units</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>time(time)</p></td>
<td><p>“time”</p></td>
<td><p>“seconds since 1970-01-01 00:00:00”</p></td>
</tr>
<tr class="row-odd"><td><p>geolat(lat, lon)</p></td>
<td><p>“latitude”</p></td>
<td><p>“degrees_north”</p></td>
</tr>
<tr class="row-even"><td><p>geolon(lat, lon)</p></td>
<td><p>“longitude”</p></td>
<td><p>“degrees_east”</p></td>
</tr>
<tr class="row-odd"><td><p>snow_water_equivalent(time, lat, lon)</p></td>
<td><p>“snow water equivalent”</p></td>
<td><p>“mm”</p></td>
</tr>
<tr class="row-even"><td><p>snow_depth(time, lat, lon)</p></td>
<td><p>“snow depth”</p></td>
<td><p>“m”</p></td>
</tr>
<tr class="row-odd"><td><p>canopy_water(time, lat, lon)</p></td>
<td><p>“canopy surface water”</p></td>
<td><p>“mm”</p></td>
</tr>
<tr class="row-even"><td><p>skin_temperature(time, lat, lon)</p></td>
<td><p>“surface skin temperature”</p></td>
<td><p>“K”</p></td>
</tr>
<tr class="row-odd"><td><p>soil_temperature(time, soil_levels, lat, lon)</p></td>
<td><p>“soil temperature”</p></td>
<td><p>“K”</p></td>
</tr>
<tr class="row-even"><td><p>soil_moisture(time, soil_levels, lat, lon)</p></td>
<td><p>“volumetric soil moisture”</p></td>
<td><p>“m3/m3”</p></td>
</tr>
<tr class="row-odd"><td><p>soil_liquid(time, soil_levels, lat, lon)</p></td>
<td><p>“volumetric soil liquid”</p></td>
<td><p>“m3/m3”</p></td>
</tr>
</tbody>
</table>
</section>
<section id="fv3-fix-tiled-files">
<h4><span class="section-number">3.2.1.2.3. </span>FV3_fix_tiled Files<a class="headerlink" href="#fv3-fix-tiled-files" title="Link to this heading"></a></h4>
<p>The UFS land component also requires a series of tiled static (fix) files that will be used by the component model. These files contain information on maximum snow albedo, slope type, soil color and type, substrate temperature, vegetation greenness and type, and orography (grid and land mask information). These files are located in the <code class="docutils literal notranslate"><span class="pre">inputs/FV3_fix_tiled/C96</span></code> directory (downloaded <a class="reference internal" href="#inputfiles"><span class="std std-ref">above</span></a>).</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">C96.facsf.tile*.nc</span>
<span class="go">C96_grid.tile*.nc</span>
<span class="go">C96.maximum_snow_albedo.tile*.nc</span>
<span class="go">C96.slope_type.tile*.nc</span>
<span class="go">C96.snowfree_albedo.tile*.nc</span>
<span class="go">C96.soil_type.tile*.nc</span>
<span class="go">C96.soil_color.tile*.nc</span>
<span class="go">C96.substrate_temperature.tile*.nc</span>
<span class="go">C96.vegetation_greenness.tile*.nc</span>
<span class="go">C96.vegetation_type.tile*.nc</span>
<span class="go">grid_spec.nc</span>
<span class="go">oro_C96.mx100.tile*.nc</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">C96_grid.tile*.nc</span></code> files contain grid information for tiles 1-6 at C96 grid resolution. The <code class="docutils literal notranslate"><span class="pre">grid_spec.nc</span></code> file contains information on the mosaic grid.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">grid_spec.nc</span></code> and <code class="docutils literal notranslate"><span class="pre">C96.mosaic.nc</span></code> are the same file under different names and may be used interchangeably.</p>
</div>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="ConfigWorkflow.html" class="btn btn-neutral float-left" title="3.1. Available Workflow Configuration Parameters" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="DASystem.html" class="btn btn-neutral float-right" title="3.3. Input/Output Files for the JEDI DA System" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, .</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>