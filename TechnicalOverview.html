<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>2. Technical Overview &mdash; UFS Offline Land DA Develop Branch Documentation documentation</title><link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/custom.css" type="text/css" />
      <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="3. Noah-MP Land Surface Model" href="Model.html" />
    <link rel="prev" title="1. Introduction" href="Introduction.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            UFS Offline Land DA
          </a>
              <div class="version">
                develop
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Introduction.html">1. Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">2. Technical Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#prerequisites">2.1. Prerequisites</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#minimum-system-requirements">2.1.1. Minimum System Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#software-prerequisites">2.1.2. Software Prerequisites</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#supported-systems-for-running-land-da">2.2. Supported Systems for Running Land DA</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#level-1-systems">2.2.1. Level 1 Systems</a></li>
<li class="toctree-l3"><a class="reference internal" href="#level-2-4-systems">2.2.2. Level 2-4 Systems</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#code-repositories-and-directory-structure">2.3. Code Repositories and Directory Structure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#directory-structure">2.3.1. Directory Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#land-da-components">2.3.2. Land DA Components</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Model.html">3. Noah-MP Land Surface Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="DASystem.html">4. Land Data Assimilation System</a></li>
<li class="toctree-l1"><a class="reference internal" href="Glossary.html">5. Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">UFS Offline Land DA</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active"><span class="section-number">2. </span>Technical Overview</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/TechnicalOverview.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="technical-overview">
<span id="techoverview"></span><h1><span class="section-number">2. </span>Technical Overview<a class="headerlink" href="#technical-overview" title="Permalink to this headline"></a></h1>
<div class="section" id="prerequisites">
<h2><span class="section-number">2.1. </span>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline"></a></h2>
<div class="section" id="minimum-system-requirements">
<h3><span class="section-number">2.1.1. </span>Minimum System Requirements<a class="headerlink" href="#minimum-system-requirements" title="Permalink to this headline"></a></h3>
<p><a class="reference internal" href="Glossary.html#term-ufs"><span class="xref std std-term">UFS</span></a> applications, models, and components require a UNIX-based operating system (i.e., Linux or MacOS).</p>
<p>Additionally, users will need:</p>
<blockquote>
<div><ul class="simple">
<li><p>Disk space: TBD</p></li>
<li><p>Memory: TBD</p></li>
<li><p>6 CPU cores (or option to run with “oversubscribe”)</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="software-prerequisites">
<h3><span class="section-number">2.1.2. </span>Software Prerequisites<a class="headerlink" href="#software-prerequisites" title="Permalink to this headline"></a></h3>
<p>The Land DA System requires:</p>
<blockquote>
<div><ul>
<li><p>An <a class="reference internal" href="Glossary.html#term-mpi"><span class="xref std std-term">MPI</span></a> implementation</p></li>
<li><p>Fortran compiler</p></li>
<li><p>Python</p></li>
<li><p><a class="reference internal" href="Glossary.html#term-netcdf"><span class="xref std std-term">NetCDF</span></a></p></li>
<li><p><a class="reference external" href="https://spack-stack.readthedocs.io/en/latest/">spack-stack</a></p></li>
<li><p><a class="reference external" href="https://github.com/JCSDA/fv3-bundle/wiki">FV3 bundle</a></p></li>
<li><p><a class="reference external" href="https://jointcenterforsatellitedataassimilation-jedi-docs.readthedocs-hosted.com/en/latest/inside/jedi-components/ioda/index.html">IODA</a> bundle</p>
<blockquote>
<div></div></blockquote>
</li>
</ul>
</div></blockquote>
<p>These software prerequisites are pre-installed in the Land DA <a class="reference internal" href="Glossary.html#term-container"><span class="xref std std-term">container</span></a> and on Level 1 systems (see <a class="reference internal" href="#levelsofsupport"><span class="std std-ref">below</span></a> for details). However, users on other systems will need to install them.</p>
<p>Before using the Land DA container, users will need to install <a class="reference external" href="https://docs.sylabs.io/guides/latest/user-guide/">Singularity</a> and an <strong>Intel</strong> MPI (available <a class="reference external" href="https://www.intel.com/content/www/us/en/developer/tools/oneapi/hpc-toolkit-download.html">free here</a>).</p>
</div>
</div>
<div class="section" id="supported-systems-for-running-land-da">
<span id="levelsofsupport"></span><h2><span class="section-number">2.2. </span>Supported Systems for Running Land DA<a class="headerlink" href="#supported-systems-for-running-land-da" title="Permalink to this headline"></a></h2>
<p>Four levels of support have been defined for <a class="reference internal" href="Glossary.html#term-ufs"><span class="xref std std-term">UFS</span></a> applications, and the Land DA system operates under this paradigm:</p>
<ul class="simple">
<li><p><strong>Level 1</strong> <em>(Pre-configured)</em>: Prerequisite software libraries are pre-built and available in a central location; code builds; full testing of model</p></li>
<li><p><strong>Level 2</strong> <em>(Configurable)</em>: Prerequisite libraries are not available in a centralized location but are expected to install successfully; code builds; full testing of model</p></li>
<li><p><strong>Level 3</strong> <em>(Limited-test platforms)</em>: Libraries and code build on these systems, but there is limited testing of the model</p></li>
<li><p><strong>Level 4</strong> <em>(Build-only platforms)</em>: Libraries and code build, no tests with running the model</p></li>
</ul>
<div class="section" id="level-1-systems">
<h3><span class="section-number">2.2.1. </span>Level 1 Systems<a class="headerlink" href="#level-1-systems" title="Permalink to this headline"></a></h3>
<p>Preconfigured (Level 1) systems for Land DA already have the required external libraries available in a central location via <a class="reference internal" href="Glossary.html#term-spack-stack"><span class="xref std std-term">spack-stack</span></a>. Land DA is expected to build and run out-of-the-box on these systems, and users can download the Land DA code without first installing prerequisite software. With the exception of the Land DA container, users must have access to these Level 1 systems in order to use them.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 17%" />
<col style="width: 72%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Platform</p></th>
<th class="head"><p>Compilers</p></th>
<th class="head"><p>spack-stack Installation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Hera</p></td>
<td><p>Intel 18.0.5.274</p></td>
<td><p>/scratch1/NCEPDEV/nems/role.epic/spack-stack/envs/landda-release-1.0-intel</p></td>
</tr>
<tr class="row-odd"><td><p>Orion</p></td>
<td><p>Intel 18.0.5</p></td>
<td><p>/work/noaa/epic-ps/role-epic-ps/spack-stack/envs/landda-release-1.0-intel</p></td>
</tr>
<tr class="row-even"><td><p>Container</p></td>
<td><p>Intel</p></td>
<td><p>/opt/spack-stack/ (inside the container)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="level-2-4-systems">
<h3><span class="section-number">2.2.2. </span>Level 2-4 Systems<a class="headerlink" href="#level-2-4-systems" title="Permalink to this headline"></a></h3>
<p>On non-Level 1 platforms, the Land DA system can be run within a container that includes the prerequisite software; otherwise, the required libraries will need to be installed as part of the Land DA build process. Once these prerequisite libraries are installed, applications and models should build and run successfully. However, users may need to perform additional troubleshooting on Level 3 or 4 systems since little or no pre-release testing has been conducted on these systems.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Running on Jet, Cheyenne, and NOAA Cloud systems is supported via container.</p>
</div>
</div>
</div>
<div class="section" id="code-repositories-and-directory-structure">
<h2><span class="section-number">2.3. </span>Code Repositories and Directory Structure<a class="headerlink" href="#code-repositories-and-directory-structure" title="Permalink to this headline"></a></h2>
<div class="section" id="directory-structure">
<h3><span class="section-number">2.3.1. </span>Directory Structure<a class="headerlink" href="#directory-structure" title="Permalink to this headline"></a></h3>
<p>The main repository for the Land DA System is named <code class="docutils literal notranslate"><span class="pre">land-offline_workflow</span></code>;
it is available on GitHub at <a class="reference external" href="https://github.com/NOAA-PSL/land-offline_workflow">https://github.com/NOAA-PSL/land-offline_workflow</a>.
A number of submodules are nested under the main <code class="docutils literal notranslate"><span class="pre">land-offline_workflow</span></code> directory.
When the <code class="docutils literal notranslate"><span class="pre">land-offline_workflow</span></code> repository is cloned with the
<code class="docutils literal notranslate"><span class="pre">--recurse-submodules</span></code> argument, the basic directory structure will be similar
to the example below. Some files and directories have been removed for brevity.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">land-offline_workflow</span>
<span class="go"> ├── DA_update</span>
<span class="go"> │     ├── IMS_proc</span>
<span class="go"> │     ├── add_jedi_incr</span>
<span class="go"> │     └── jedi</span>
<span class="go"> ├── cmake</span>
<span class="go"> ├── configures</span>
<span class="go"> ├── docs</span>
<span class="go"> ├── ensemble_pert</span>
<span class="go"> ├── ufs-land-driver</span>
<span class="go"> │     └── ccpp-physics</span>
<span class="go"> ├── vector2tile</span>
<span class="go"> ├── CMakeLists.txt</span>
<span class="go"> └── README.md</span>
</pre></div>
</div>
</div>
<div class="section" id="land-da-components">
<h3><span class="section-number">2.3.2. </span>Land DA Components<a class="headerlink" href="#land-da-components" title="Permalink to this headline"></a></h3>
<p><a class="reference internal" href="#landdacomponents"><span class="std std-numref">Table 2.1</span></a> describes the various subrepositories that form
the UFS Land DA System.</p>
<span id="landdacomponents"></span><table class="docutils align-default" id="id1">
<caption><span class="caption-number">Table 2.1 </span><span class="caption-text">UFS Land DA System Components</span><a class="headerlink" href="#id1" title="Permalink to this table"></a></caption>
<colgroup>
<col style="width: 21%" />
<col style="width: 34%" />
<col style="width: 45%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Repository Name</p></th>
<th class="head"><p>Repository Description</p></th>
<th class="head"><p>Authoritative repository URL</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>land-DA_update</p></td>
<td><p>Contains scripts and components for
performing data assimilation (DA)
procedures.</p></td>
<td><p><a class="reference external" href="https://github.com/NOAA-PSL/land-DA_update">https://github.com/NOAA-PSL/land-DA_update</a></p></td>
</tr>
<tr class="row-odd"><td><p><em>– land-apply_jedi_incr</em></p></td>
<td><p>Contains code that applies the
JEDI-generated DA increment to UFS
<code class="docutils literal notranslate"><span class="pre">sfc_data</span></code> restart</p></td>
<td><p><a class="reference external" href="https://github.com/NOAA-PSL/land-apply_jedi_incr">https://github.com/NOAA-PSL/land-apply_jedi_incr</a></p></td>
</tr>
<tr class="row-even"><td><p><em>– land-IMS_proc</em></p></td>
<td><p>Contains code for processing Ice
Mapping Data (IMS) ASCII input files
on the UFS model grid.</p></td>
<td><p><a class="reference external" href="https://github.com/NOAA-PSL/land-IMS_proc">https://github.com/NOAA-PSL/land-IMS_proc</a></p></td>
</tr>
<tr class="row-odd"><td><p>ufs-land-driver</p></td>
<td><p>Repository for the UFS Land
Driver</p></td>
<td><p><a class="reference external" href="https://github.com/barlage/ufs-land-driver">https://github.com/barlage/ufs-land-driver</a></p></td>
</tr>
<tr class="row-even"><td><p><em>– ccpp-physics</em></p></td>
<td><p>Repository for the Common
Community Physics Package (CCPP)</p></td>
<td><p><a class="reference external" href="https://github.com/NCAR/ccpp-physics">https://github.com/NCAR/ccpp-physics</a></p></td>
</tr>
<tr class="row-odd"><td><p>land-vector2tile</p></td>
<td><p>Contains code to map between the vector
format used by the Noah-MP offline
driver, and the tile format used by the
UFS atmospheric model.</p></td>
<td><p><a class="reference external" href="https://github.com/NOAA-PSL/land-vector2tile">https://github.com/NOAA-PSL/land-vector2tile</a></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Introduction.html" class="btn btn-neutral float-left" title="1. Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="Model.html" class="btn btn-neutral float-right" title="3. Noah-MP Land Surface Model" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>